REWRITE TODO
---
commands to finish:
p/update - change to subcommands so that users can do p/update get 123 and instead would be p/update create ping=true update text here

website stuff to finish:
/guide (will be generated by command long_description and stuff now instead of manually made)
/invite (will be a basic advertisement)
/statistics
/logs
/updates (views updates)
/config (utilize oauth2 shenanigans)
/prompts (also utilize oauth2 shenanigans) (tis the prompt browser)
/queues (would list active queues)
/terms & /privacy (these two can come much later though, they're just needed for discord verification)
dunno the name but something that just redirects to the discord bot invite link

stuff to finish:
update manager - add all past updates
update display changed to image instead of embed
allow diabolical reactions to use server emojis
gpt tools:
- get_user
- list_channels
- get_channel
- suggest

LATEST UPDATE
---
it has finally been done! the rewrite is complete!

lets start off with the bad stuff so you'll forget about it by the time you finish reading
**removals:**
- p/cleanup
- p/notice
- p/trueban  (as well as systems related to it)
- p/blacklist
- p/pepperannouncement
- p/setversion
- p/subupdate (p/update automatically splits now)
- p/patch
- p/corrupt (it was so ass)
- p/jak (soloed by booru.soy)
- p/embed
- p/markov
- p/random buildidea
- p/equipment (both of these are just too hard to maintain, deepwoken updates too often for me to give a shit (especially since i dont even play the game anymore))
- p/force (two reasons: it's TOS questionable and i lowkey just didn't wanna bother remaking it; i might readd it later if theres enough demand for it)

the biggest new base feature
**command piping:**

- commands can now be piped by adding " | p/command" to the end of it. for example: "p/test | p/test | p/test"
- new command p/grep which functions nearly identically to grep on linux, added exclusively for the purpose of piping to it
  there's too many commands that are pipable to eachother to really list, so just find out yourself by looking at the guide page.
- also new p/tail and p/head which function again the same as head and tail on linux.

**gpt stuff:**

- tool calls have been improved, instead of using my own system i am yet again using another openai feature. i've found one that allows for tools but without the usage of the stupid assistants api, resulting in only a little bit slower response times, compared to the much slower times the last time i tried this. this has several benefits:
  - tool calls can no longer be messed up, so never again will you see $EXEC_TOOL stuff
  - custom prompts can now use tool calls
  - tool calls will take less time to process because the AI doesn't need to spend time writing $EXEC_TOOL or the text he likes to write around it
- new tools:
  - new "date_to_timestamp" tool allows dates to be converted to timestamps
  - new "request_raw_url" allows gpt to request urls with specified body, headers, and method values. this could in theory allow it to use public APIs
  - new "pick_random" tool allows gpt to get a random item from a list
  - probably the most powerful tool ever added, "evaluate_luau" allows gpt to write and evaluate custom luau code. this can be used to complete semi-complex tasks almost instantly
- removed tools:
  - get_listening_data because he was overusing it
  - describe_image because he wasn't using it correctly
  - dm because it was stupid
  - date because it has been replaced with date_to_timestamp
  - get_update because it was stupid
  - get_deepwoken_build because i dont really deepwoken much more
- p/prompt has been completely overhauled
  - prompts are now automatically saved instead of you having to do p/prompt save
  - prompts can now be published for viewing on the prompt browser
  - prompts now save when they were last updated & created & published
  - prompts now have a description property (to be used by the prompt browser)
  - prompts now have an nsfw property (to be used by the prompt browser)
  - you can now set the default prompt to a custom one
  - saved prompts can now be deleted
- gpt now has a completely new prompt
  - if you for some reason want to use the old prompt, you still can by running `p/prompt clone PepperBot/old` and then `p/prompt default old`
- gpt conversations are now MUCH more customizable via the use of p/conversation setparam
- gpt responses now use openai's seeding feature so they can be reproduced
- AI can now see stickers
- default model is now gpt-4.1-nano instead of gpt-4o-mini. it's significantly cheaper and better at following instructions (which unfortunately means its also better at following openai's dumb instructions)
- GPT models have been completely overhauled, which means that in the future there could be support for models from manufacturers other than openai. run `p/gpt model list` to see all the new data i store about them and the new ones i've given access to.

**new commands:**
-# excluding previously mentioned commands

- new p/random phrase allows you to generate phrases based off parts of speech (ex. p/random phrase noun adjective adverb verb noun)
- new p/encode and p/decode allow you to encode and decode text via various algorithms. use `p/encode list` to get a list of all of the algorithms.
- brought back p/sendlog because of the new piping related commands

**other actual content:**

- command data has been overhauled
  - whitelists are now comprised of users, roles, channels, and guilds rather than just users
  - blacklists now exist (exact opposite of whitelists)
  - improved help/tutorial values:
    - commands now have tags
    - descriptions are separated into a short and long form, one for display under a slash command and one for all other cases
    - requirements can now have longer forms (ex. required if arg2 is undefined)
    - contributors can be added (basically just to credit people)
    - commands now have usage examples
    - commands now have argument orders
- site has been completely remade
- bots can no longer execute any commands. this was just yet another value i had to think about if it would cause problems or not
- p/vc join & leave now check for the "speak" permission instead of the "connect" permission
- p/sound list & p/prompt list now use a 3 column list instead of a text file
- p/playurl and p/queue now support many, many, MANY more urls
  - supports [anything that yt-dlp does](<https://github.com/yt-dlp/yt-dlp/blob/master/supportedsites.md>)
- p/queue now persists through restarts
- adding playlists to p/queue no longer uses googles shitty api that only returns 50 responses at most, now your ENTIRE playlist will be added every time. also supports playlists from websites other than youtube (probably)
- p/help has been greatly improved
  - subcommands are now in paged menus
  - all options are displayed in one embed
  - uses the new tutorial values
- p/gpt has been renamed to p/conversation

**technical details:**

- javascript -> typescript
- running off of bun now instead of nodejs
- no longer sharding, it was doing me no good at all and just making it harder to develop
- constant resources have been separated into a /constant folder
- user data has been transformed into a SQL database
- guild config values are now separated by category
- most processes now host a server for easy inter-process communication (because oh my god the default is so insanely terrible)
- data passed to commands is no longer a list of 4 arguments, instead just one object you can choose what you want from. that also lets me reasonably pass a LOT more data to them
- im no longer using the slash command builders because they are annoying and i hate them i hate them i hate them get them out of my sight
- voice connections are now managed by GuildVoiceManagers which automatically create audio players
- the GPT script's file type checker thing no longer uses my own stupid thing and instead now uses mime-types
- gpt now uses openai.responses instead of openai.beta.chat.completions
- site is now largely made on the server rather than using javascript to request endpoints and use them
- normal aliases have been renamed to root aliases
- text converted to attachments is no longer stored in a cache file
- using yt-dlp instead of @distube/ytdl-core to download audio for videos
- using classes to store videos and playlists now instead of just a url
- paged embeds have been completely redone and are no longer horrendous to use