<html lang="en">
    <head>
        <title>Pepper Site</title>
        <link rel="stylesheet" type="text/css" href="/newstyle.css" />
        <link rel="icon" type="image/x-icon" href="./images/favicon.ico" />
        <meta content="ze peppersite" property="og:title" />
        <meta content="ye" property="og:description" />
        <meta content="http://199.58.97.155" property="og:url" />
        <meta content="#ff0000" data-react-helmet="true" name="theme-color" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    </head>
    <body>
        <div class="sidebar">
            <script id="definesidebarfunctions">
                let sidebarIsOpen = sessionStorage.getItem('sidebarIsOpen');;
                function redirectTo(url) {
                    sessionStorage.setItem('sidebarIsOpen', sidebarIsOpen);
                    window.location.href = url;
                }
                function openInNewTab(url) {
                    sessionStorage.setItem('sidebarIsOpen', sidebarIsOpen);
                    let win = window.open(
                        url,
                        "_blank"
                    );
                }
            </script>
            <h2 class="sidebarTitle">NAVIGATION</h2>
            <div class="sidebarDivider"></div>
            <div class="sidebarButton" id="/" onclick="redirectTo(this.id)" onauxclick="openInNewTab(this.id)">Home</div>
            <div class="sidebarButton" id="/statistics" onclick="redirectTo(this.id)" onauxclick="openInNewTab(this.id)">Statistics</div>
            <div class="sidebarButton" id="/logs" onclick="redirectTo(this.id)" onauxclick="openInNewTab(this.id)">Logs</div>
            <div class="sidebarButton" id="/credits" onclick="redirectTo(this.id)" onauxclick="openInNewTab(this.id)">Credits</div>
            <div class="sidebarButton" id="/contact" onclick="redirectTo(this.id)" onauxclick="openInNewTab(this.id)">Contact</div>
            <div class="sidebarButton" id="/shame" onclick="redirectTo(this.id)" onauxclick="openInNewTab(this.id)">Shame</div>
            <div class="sidebarButton" id="/coolsites" onclick="redirectTo(this.id)" onauxclick="openInNewTab(this.id)">Cool Sites</div>
            <script id="sidebarmain">
                function toggleSidebar() {
                    document.querySelectorAll(".sidebar").forEach((element) => {
                        void element.offsetWidth;

                        if (sidebarIsOpen) {
                            element.style.animation = "slideOpen 0.5s forwards";
                        } else {
                            element.style.animation =
                                "slideClose 0.5s forwards";
                        }
                    });
                    sidebarIsOpen = !sidebarIsOpen;
                    sessionStorage.setItem('sidebarIsOpen', sidebarIsOpen);
                }
                document.addEventListener("keydown", (event) => {
                    if (event.key === "k") {
                        toggleSidebar();
                    }
                });
                document
                    .querySelectorAll(".sidebarButton")
                    .forEach((button) => {
                        button.style.transition = "transform 0.25s ease-in-out";
                        button.addEventListener("mouseover", () => {
                            button.style.backgroundColor = "#13131d";
                            button.style.transform = "translateX(-100px)";
                        });
                        button.addEventListener("mouseout", () => {
                            button.style.backgroundColor = "#1E1E2E";
                            button.style.transform = "translateX(0px)";
                        });
                        button.addEventListener("mousedown", () => {
                            button.style.backgroundColor = "#616187";
                        });
                        button.addEventListener("mouseup", () => {
                            button.style.backgroundColor = "#616187";
                        });
                    });
                document.addEventListener("DOMContentLoaded", function () {
                    sidebarIsOpen = sessionStorage.getItem('sidebarIsOpen') === "true";
                    if (sidebarIsOpen) {
                        document
                            .querySelectorAll(".sidebar")
                            .forEach((element) => {
                                element.style.animation =
                                    "slideClose 0s forwards";
                            });
                    }
                });
            </script>
        </div>
        <div class="cardcontainer" id="maintitle" style="left: 50%; top: 15px; transform: translateX(-50%)">
            <div class="sectionoutline" style="justify-content: center; align-items: center; text-align: center;">
                <h2 class="sectionTitle">ze peppersite</h2>
            </div>
        </div>
        <div id="leftcontainer" class="cardcontainer" style="left: 5%; top: 10%;">
            <div class="container" id="whereami" style="position: relative; padding-bottom: 15px">
                <div class="sectionoutline">
                    <div class="sectioncontent" style="max-width: 600px">
                        <h2 class="sectionTitle">Where am I?</h2>
                        <p>hello! welcome to my lil segment of the internet<br />there isn't very much here, mostly just statistics and utilities for my discord bot. if you found this, well honestly you probably weren't looking for it.</p>
                        <p>the rest of the content of this site can be found by pressing K, or if you're on mobile by <a href="#" onclick="toggleSidebar()">clicking here</a> (i'll make a better system for this later don't worry)</p> 
                        <p>incase you're curious, you can find the source code for this site at <a href="https://github.com/ayeuhugyu/PepperBot/tree/main/src/WebServer" target="_blank">my github</a></p>
                    </div>
                </div>
            </div>
            <div class="container" id="whatsnew" style="position: relative; padding-bottom: 15px">
                <script id="updatereader">
                    document.addEventListener(
                        "DOMContentLoaded",
                        async function () {
                            const updversion =
                                document.getElementById("textbox");
                            let ver;
                            await fetch("/get-latest-update")
                                .then((response) => response.text())
                                .then((text) => {
                                    updversion.value = text;
                                    ver = text;
                                });
                            readUpdate(ver);
                        }
                    );
                    function readUpdate(givenver) {
                        const updatecontent =
                            document.getElementById("updatecontent");
                        updatecontent.style.maxWidth = `${updatecontent.offsetWidth}px`;
                        const version =
                            document.getElementById("textbox").value;
                        updatecontent.innerText = `reading ${version}.txt... `;
                        fetch(`/read-update/?version=${version || givenver}`)
                            .then((response) => response.text())
                            .then((text) => {
                                updatecontent.innerText = `VERSION ${
                                    version || givenver
                                }\n\n${text}`;
                            });
                    }
                </script>
                <div class="sectionoutline">
                    <div class="sectioncontent" style="margin-bottom: -10px; max-width: 600px">
                        <h2 class="sectionTitle">What's new?</h2>
                        <p>while i don't keep update logs of my site, i do keep them for my discord bot, so you can view those here.</p>
                        <p>just so you know, up until version 88 i didn't keep logs, so all of those have been manually copy and pasted and might not be 100% accurate.</p>
                        <input type="text" id="textbox" placeholder="version #"/>
                        <button type="button" onclick="readUpdate();">Submit</button>
                        <pre class="outlined" id="updatecontent" style="width: calc(100% + 8px); min-height: 300px; max-height: 300px; overflow: scroll; text-align: left;"></pre>
                    </div>
                </div>
            </div>
        </div>
        <div id="rightcontainer" class="cardcontainer" style="right: 5%; top: 10%;">
            <div class="container" id="whatshere" style="position: relative; padding-bottom: 15px">
                <div class="sectionoutline">
                    <div class="sectioncontent" style="max-width: 600px">
                        <h2 class="sectionTitle">What's here?</h2>
                        <p>not much at the moment, as i stated before just a few utilities for my discord bot, mainly <a href="/statistics">statistics</a> and <a href="/logs">log viewing</a></p>
                        <p>in terms of not discord-bot related things.. i have a few other pages: <br /><a href="/credits">credits</a>, <a href="/contact">contact</a>, <a href="/shame">shame</a>, and <a href="/coolsites">cool sites</a></p>
                        <p>and finally, for those interested you can take a look at my unformatted page that i use for copy and pasting various assets <a href="/pages/assetsdisplay.html">here</a></p>
                    </div>
                </div>
            </div>
            <div class="container" id="whatsnext" style="position: relative; padding-bottom: 15px">
                <script id="todoreader">
                    function parseTodoList(list) {
                        let text = "";
                        list.forEach((item, index) => {
                        text += `${item.completed ? "âœ…~~" : ""}[${index + 1}] - ${item.value}${item.completed ? "~~" : ""}\n`;
                        });
                        return text;
                    }
                    function updateTodo() {
                        const todocontent =
                            document.getElementById("todocontent");
                            todocontent.style.maxWidth = `${todocontent.offsetWidth}px`;
                            todocontent.innerText = `reading todo list...`;
                        fetch(`/read-todo/`)
                            .then((response) => response.text())
                            .then((text) => {
                                todocontent.innerText = parseTodoList(JSON.parse(text));
                            });
                    }
                    document.addEventListener("DOMContentLoaded", updateTodo);
                </script>
                <div class="sectionoutline">
                    <div class="sectioncontent" style="max-width: 600px">
                        <h2 class="sectionTitle">What's next?</h2>
                        <p>again, i don't have a todo list for the website, however i do have a todo list for the discord bot, so you can take a look at it here.</p>
                        <pre class="outlined" id="todocontent" style="width: calc(100% + 8px); min-height: 200px; max-height: 200px; overflow: scroll; text-align: left;"></pre>
                    </div>
                </div>
            </div>
            <div class="container" id="anythingelse" style="position: relative; padding-bottom: 15px">
                <div class="sectionoutline">
                    <div class="sectioncontent" style="max-width: 600px">
                        <h2 class="sectionTitle">Anything else?</h2>
                        <p>not really, i've pretty much explained everything there is to explain<br />i guess if for some reason you feel the need to toggle mobile mode, you can do so by <a href="#" onclick="toggleMobileMode()">clicking right here</a></p>
                        <p>oh and by the way web crawlers, scanners, and other bots of the internet, hi! you can go away now.</p>
                    </div>
                </div>
            </div>
        </div>
        <div id="mobileholder" class="container">
            <div id="mobiledisplay" class="cardcontainer"></div>
        </div>
        <script id="mobiledisplay">
            function enableMobileMode() {
                const whereami = document.getElementById("whereami");
                const whatshere = document.getElementById("whatshere");
                const whatsnew = document.getElementById("whatsnew");
                const whatsnext = document.getElementById("whatsnext");
                const anythingelse = document.getElementById("anythingelse");
                const title = document.getElementById("maintitle");
                title.style.display = "none";
                const order = [whereami, whatshere, whatsnew, whatsnext, anythingelse];
                const mobileDisplay = document.getElementById("mobiledisplay");
                const leftdisplay = document.getElementById("leftcontainer");
                const rightdisplay = document.getElementById("rightcontainer");
                leftdisplay.setAttribute("aria-hidden", "true");
                rightdisplay.setAttribute("aria-hidden", "true");
                mobileDisplay.style.zIndex = 0;
                order.forEach((element) => {
                    mobileDisplay.appendChild(element);
                });
            }
            function disableMobileMode() {
                const whereami = document.getElementById("whereami");
                const whatshere = document.getElementById("whatshere");
                const whatsnew = document.getElementById("whatsnew");
                const whatsnext = document.getElementById("whatsnext");
                const anythingelse = document.getElementById("anythingelse");
                const title = document.getElementById("maintitle");
                title.style.display = "block";
                const mobileDisplay = document.getElementById("mobiledisplay");
                mobileDisplay.style.zIndex = -1;
                const leftdisplay = document.getElementById("leftcontainer");
                const rightdisplay = document.getElementById("rightcontainer");
                leftdisplay.setAttribute("aria-hidden", "false");
                rightdisplay.setAttribute("aria-hidden", "false");
                leftdisplay.appendChild(whereami);
                leftdisplay.appendChild(whatsnew);
                rightdisplay.appendChild(whatshere);
                rightdisplay.appendChild(whatsnext);
                rightdisplay.appendChild(anythingelse);
            }
            let mobileMode = sessionStorage.getItem("mobileMode") === "true";
            function toggleMobileMode() {
                if (mobileMode) {
                    disableMobileMode();
                } else {
                    enableMobileMode();
                }
                mobileMode = !mobileMode;
                sessionStorage.setItem("mobileMode", mobileMode);
            }
            if (/Mobi|Android/i.test(navigator.userAgent)) {
                if (!mobileMode) {
                    toggleMobileMode();
                }
            }
            function checkMobileMode() {
                if (window.matchMedia("(max-width: 768px)").matches) {
                    if (!mobileMode) {
                        toggleMobileMode();
                    }
                } else {
                    if (mobileMode) {
                        toggleMobileMode();
                    }
                }
            }
            const mobileModeOverrideBeforeCheck = sessionStorage.getItem("mobileMode") === "true";

            // Initial check
            checkMobileMode();
            if (mobileModeOverrideBeforeCheck) {
                enableMobileMode();
                mobileMode = true
            }

            // Add event listener for screen size changes
            window.addEventListener("resize", checkMobileMode);
        </script>
    </body>
</html>
